<html>
<script src="ts_compile/fastclick.js"></script>
<script src="ts_compile/json_crush.js"></script>
<script lang="js">
    if ('addEventListener' in document) {
        document.addEventListener('DOMContentLoaded', function () {
            FastClick.attach(document.body);
        }, false);
    }
</script>
<script type="module">
    // Import the functions you need from the SDKs you need
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-analytics.js";
import { getDatabase, ref, set, get, child } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
    // Get the config from here instead of pushing to GitHub for now: https://console.firebase.google.com/u/0/project/scorehole/overview
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);
const database = getDatabase(app);

// Do something like this to write/read from Firebase. NOTE: I still don't have a clue how modules work but whatever... if it works it works.
function writeGameData(gameId) {
    set(ref(database, 'games/' + gameId), localStorage.getObject("__HISTORICAL_GAMES__").get(gameId));
}

function readGameData(gameId) {
    get(child(ref(database), 'games/' + gameId)).then((snapshot) => {
        localStorage.setObject(gameId, snapshot.val());
    });
}

window.writeGameData = writeGameData;
window.readGameData = readGameData;
</script>
<script src="ts_compile/window_management.js"></script>
<script src="ts_compile/historical_game_display.js"></script>
<script src="ts_compile/scoring.js"></script>
<script src="ts_compile/game_management.js"></script>
<script src="ts_compile/player_management.js"></script>
<script src="ts_compile/map_util.js"></script>
<script src="ts_compile/storage_util.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
<link href="css/style.css" rel="stylesheet" />
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-J521EDC3RL"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-J521EDC3RL');
        gtag('config', 'AW-801110251');
        gtag('event', 'conversion', {'send_to': 'AW-801110251/a-EsCPbC_d4DEOvx__0C'});
    </script>
</head>

<body onload="displayGameInUrl()">
    <section class="main">
        <section class="horizontal_spacing" style="margin-bottom: 10px">
            <a href="index.html">
                <button>Back to home</button>
            </a>
            <span class="divider"></span>
            <a href="history.html">
                <button>Back to game history</button>
            </a>
            <span class="divider"></span>
            <a>
                <button onclick="generateSharingUrl()">Share this game</button>
            </a>
        </section>
        <section style="width:130%">
            <div id="game_time"></div>
            <section class="horizontal_spacing">
                <div>
                    <h2>Team One</h2>
                </div>
                <div>
                    <h2>Team Two</h2>
                </div>
            </section>
            <section class="horizontal_spacing">
                <h1 id="left_final_score">21</h1>
                <h1 id="right_final_score">3</h1>
            </section>
            <hr />
            <section id="button_options" class="horizontal_spacing">
                <!-- <button onclick="displayFrames()" class="capitalize">Frames</button>
                <button onclick="displayPlayerPerformance('jason');" class="capitalize">jason</button>
                <button onclick="displayPlayerPerformance('nikki');" class="capitalize">Nikki</button>
                <button onclick="displayPlayerPerformance('zzplayer3');" class="capitalize">Zzplayer3</button>
                <button onclick="displayPlayerPerformance('zzplayer4');" class="capitalize">Zzplayer4</button> -->
            </section>
            <hr />
            <section id="past_frames">
                <!-- <div class="horizontal_spacing">
                    <h3 class="capitalize">jason</h3><span class="divider"></span>
                    <h3>Player</h3><span class="divider"></span>
                    <h3 class="capitalize">zzplayer4</h3>
                </div>
                <div class="horizontal_spacing">
                    <h3>5</h3><span class="divider"></span>
                    <h3>Total Score</h3><span class="divider"></span>
                    <h3>0</h3>
                </div>
                <div class="horizontal_spacing">
                    <h3>1</h3><span class="divider"></span>
                    <h3>Frame Score</h3><span class="divider"></span>
                    <h3>0</h3>
                </div>
                <div class="horizontal_spacing">
                    <h3>1</h3><span class="divider"></span>
                    <h3>Boards</h3><span class="divider"></span>
                    <h3>0</h3>
                </div>
                <div class="horizontal_spacing">
                    <h3>0</h3><span class="divider"></span>
                    <h3>Holes</h3><span class="divider"></span>
                    <h3>0</h3>
                </div>
                <hr>
                <div class="horizontal_spacing"></div> -->
            </section>
            <section id="player_performance" style="display: none">
                <h3>Percentages</h3>
                <section class="horizontal_spacing">
                    <div>Total</div>
                    <div>Holes</div>
                    <div>Boards</div>
                </section>
                <section class="horizontal_spacing">
                    <div class="bold">40%</div>
                    <div class="bold">10%</div>
                    <div class="bold">30%</div>
                </section>
                <hr />
                <h3>Count</h3>
            </section>
            <section id="frame_number" style="display: none">

            </section>
        </section>
    </section>
</body>

</html>